
var 'my-interests { "programming languages" "user intefraces" }
var 'my-sites { "https://news.ycombinator.com/" "https://lobste.rs/" }

priv: context {
	get-content: fn { url } { .Open* surf |Find "body" |Text? }
	print-header: fn { t } { term/bold term/cyan , print2 "\nSITE " t , term/reset }
	line: "\n\n----\n\n"
	ai: openai trim Read %.oai-token
}

list-news: does {
	for my-sites {
		.priv/print-header ,
		.priv/get-content ::cont

		priv/ai .Chat\stream join\with [ cont
			"My interests are: " join\with my-interests "\n"
			"look at the news titles above and summarize top 3 that might interest me"
		] priv/line { .prn }
	}
	""
}
